{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../tools/cjs-jasmine/index.ts"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nvar glob = require('glob');\nvar JasmineRunner = require('jasmine');\nvar path = require('path');\nrequire('source-map-support').install();\n// require('es6-shim/es6-shim.js');\nrequire('zone.js/dist/zone-node.js');\nrequire('zone.js/dist/long-stack-trace-zone.js');\nrequire('zone.js/dist/async-test.js');\nrequire('zone.js/dist/fake-async-test.js');\nrequire('reflect-metadata/Reflect');\n\nvar jrunner = new JasmineRunner();\nvar distAll: string = process.cwd() + '/dist/all';\nfunction distAllRequire(moduleId: string) {\n  return require(path.join(distAll, moduleId));\n}\n\n\n// Tun on full stack traces in errors to help debugging\n(<any>Error)['stackTraceLimit'] = Infinity;\n\njrunner.jasmine.DEFAULT_TIMEOUT_INTERVAL = 100;\n\n// Support passing multiple globs\nvar globsIndex = process.argv.indexOf('--');\nvar args: string[];\nif (globsIndex < 0) {\n  args = [process.argv[2]];\n} else {\n  args = process.argv.slice(globsIndex + 1);\n}\n\nvar specFiles: any =\n    args.map(function(globstr: string):\n                 string[] {\n                   return glob.sync(globstr, {\n                     cwd: distAll,\n                     ignore: [\n                       // the following code and tests are not compatible with CJS/node environment\n                       '@angular/platform-browser/**',\n                       '@angular/platform-browser-dynamic/**',\n                       '@angular/core/test/zone/**',\n                       '@angular/core/test/fake_async_spec.*',\n                       '@angular/forms/test/**',\n                       '@angular/common/test/forms-deprecated/**',\n                       '@angular/router/test/route_config/route_config_spec.*',\n                       '@angular/router/test/integration/bootstrap_spec.*',\n                       '@angular/integration_test/symbol_inspector/**',\n                       '@angular/upgrade/**',\n                       '@angular/examples/**',\n                       'angular1_router/**',\n                       'payload_tests/**',\n                     ]\n                   });\n                 })\n        // The security spec however works (and must work!) on the server side.\n        .concat(glob.sync('@angular/platform-browser/test/security/**/*_spec.js', {cwd: distAll}))\n        .reduce((specFiles: string[], paths: string[]) => specFiles.concat(paths), <string[]>[]);\n\njasmine.DEFAULT_TIMEOUT_INTERVAL = 100;\n\njrunner.configureDefaultReporter({showColors: process.argv.indexOf('--no-color') === -1});\n\njrunner.onComplete(function(passed: boolean) { process.exit(passed ? 0 : 1); });\njrunner.projectBaseDir = path.resolve(__dirname, '../../');\njrunner.specDir = '';\nrequire('./test-cjs-main.js');\nrequire('zone.js/dist/jasmine-patch.js');\ndistAllRequire('@angular/platform-server/src/parse5_adapter.js').Parse5DomAdapter.makeCurrent();\nspecFiles.forEach((file: string) => {\n  var r = distAllRequire(file);\n  if (r.main) r.main();\n});\njrunner.execute();\n"]}